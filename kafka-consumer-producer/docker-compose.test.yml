version: '3.8'

services:
  kafka-perf-test:
    build:
      context: .
      dockerfile: Dockerfile
    image: kafka-perf-test:latest
    container_name: kafka-perf-test
    volumes:
      # Monter le fichier .env si disponible
      - ./.env:/app/.env:ro
      # Optionnel: monter des certificats SSL
      # - ./certs:/app/certs:ro
    environment:
      # Les variables d'environnement peuvent être définies ici
      # ou via le fichier .env monté
      - KAFKA_BOOTSTRAP_SERVERS=${KAFKA_BOOTSTRAP_SERVERS:-}
      - KAFKA_USERNAME=${KAFKA_USERNAME:-}
      - KAFKA_PASSWORD=${KAFKA_PASSWORD:-}
    networks:
      - default
    # Ne pas redémarrer automatiquement
    restart: "no"
    # Commande par défaut (peut être surchargée)
    command: ["help"]
